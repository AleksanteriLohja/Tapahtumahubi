<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Tapahtumahubi.App.ParticipantsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="{Binding PageTitle}"
    BackgroundColor="#E5D9F2">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="LisÃ¤Ã¤" Clicked="OnAddClicked" />
    </ContentPage.ToolbarItems>
    <Grid RowDefinitions="auto,*">
    <VerticalStackLayout Padding="16" Spacing="8" Grid.Row="0">
        <Grid ColumnDefinitions="*,auto,Auto" Margin="8,0">
            <Label Text="{Binding CounterText}" FontAttributes="Bold" TextColor="#1E293B"/>
            <Button Grid.Column="1" Text="PÃ¤ivitÃ¤" Clicked="OnRefreshClicked"
                    BackgroundColor="#A294F9" TextColor="#1E293B" Margin="8,0"/>
            <Button x:Name="DeleteAllButton"
                    Text="Takaisin" Grid.Column="2"
                     Clicked="OnBack"
                     
                     BackgroundColor="IndianRed"
                     TextColor="White" />
        </Grid>

            <CollectionView ItemsSource="{Binding Participants}" Grid.Row="1">
          
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="8" ColumnDefinitions="Auto,*,Auto">
                        <Label Text="ðŸ‘¤" FontSize="18" VerticalOptions="Center" />
                        <VerticalStackLayout Grid.Column="1" Spacing="2">
                            <Label Text="{Binding Name}" FontAttributes="Bold" />
                            <Label Text="{Binding Email}" FontSize="12" TextColor="Gray" />
                        </VerticalStackLayout>
                        <HorizontalStackLayout Grid.Column="2" Spacing="6" VerticalOptions="Center">
                            <Button Text="Muokkaa"
                                    Clicked="OnEditClick"
                                    CommandParameter="{Binding .}" />
                            <Button Text="Poista"
                                    BackgroundColor="IndianRed"
                                    TextColor="White"
                                    Clicked="OnDeleteClick"
                                    CommandParameter="{Binding .}" />
                        </HorizontalStackLayout>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

            <Grid Grid.Row="1" RowDefinitions="auto"  IsVisible="{Binding IsListEmpty}" >
        <Frame Padding="24" Margin="12"
       BackgroundColor="#F5EFFF"
       HasShadow="True"
       CornerRadius="12" Grid.Row="0">
            <VerticalStackLayout Spacing="12" HorizontalOptions="Center" VerticalOptions="Center">
                <Label Text="Ei osallistujia"
               FontSize="20"
               FontAttributes="Bold"
               HorizontalTextAlignment="Center" TextColor="#1E293B" />
                <Label Text="LisÃ¤Ã¤ ensimmÃ¤inen osallistuja tÃ¤hÃ¤n tapahtumaan."
               FontSize="14"
               Opacity="0.8"
               HorizontalTextAlignment="Center" TextColor="#1E293B"/>
                <Button Text="LisÃ¤Ã¤ osallistuja"
                Clicked="OnAddClicked"
                Padding="12,8"
                CornerRadius="10" 
                BackgroundColor="#A294F9" TextColor="#1E293B"/>
            </VerticalStackLayout>
        </Frame>
        </Grid>
    </VerticalStackLayout>
    </Grid>
</ContentPage>